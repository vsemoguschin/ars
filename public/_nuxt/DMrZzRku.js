import{_ as B}from"./DbRmwbl4.js";import{_ as N,a as D}from"./xG5u76J_.js";import{_ as M}from"./CCxNnwLh.js";import{d as T,a as A,u as I,C as E,r as m,o as F,t as p,v,x as n,z as o,A as i,B as r,D as t,y as k,E as R,F as S}from"./CE95Wurm.js";import{u as j}from"./C5GjP6W8.js";const z={class:"p-6"},H={class:"flex gap-3"},L={key:0,class:"text-center"},q={key:1,class:"text-red-500 text-center"},G={key:2,class:"flex flex-col gap-3"},J={class:"mt-4 flex justify-between"},K={key:0,class:"text-green-500 mt-4"},Z=T({__name:"[id]",setup(O){const{$useApi:_}=A(),V=I(),w=E();j({title:"Транспорт"});const f=w.params.id,l=m({vehicle_type:"",registration_number:"",volume:0,insurance_expiry:"",mkad_pass_expiry:"",status:""}),g=m([]),b=m(!0),c=m(null),y=m(""),$=async()=>{try{const{data:s}=await _.get(`/vehicles/${f}/`);l.value={vehicle_type:s.vehicle_type||"",registration_number:s.registration_number||"",volume:s.volume||0,insurance_expiry:s.insurance_expiry||"",mkad_pass_expiry:s.mkad_pass_expiry||"",status:s.status||""};const{data:e}=await _.get("/vehicle-types/");g.value=e}catch(s){c.value=s.message}finally{b.value=!1}},C=async()=>{try{const{data:s}=await _.patch(`/vehicles/${f}/`,l.value);y.value="Транспортное средство успешно обновлено!",setTimeout(()=>y.value="",3e3),l.value=s}catch(s){c.value=s.message}},U=async()=>{try{const s=await _.delete(`/vehicles/${f}`);console.log("Транспортное средство удалено!"),V.push("/vehicles")}catch(s){console.error("Ошибка удаления транспортного средства:",s)}};return F($),(s,e)=>{const x=B,u=N,h=M,d=D;return p(),v("div",z,[n("div",H,[o(x,{onClick:e[0]||(e[0]=a=>t(V).push("/vehicles")),class:"h-8 w-8"},{default:i(()=>e[7]||(e[7]=[r(" < ")])),_:1}),e[8]||(e[8]=n("h1",{class:"text-2xl font-bold mb-4"},"Транспорт",-1))]),t(b)?(p(),v("div",L,e[9]||(e[9]=[n("p",null,"Загрузка...",-1)]))):t(c)?(p(),v("div",q,[n("p",null,"Ошибка загрузки: "+k(t(c)),1)])):(p(),v("div",G,[n("div",null,[o(u,{for:"vehicle_type"},{default:i(()=>e[10]||(e[10]=[r("Тип ТС")])),_:1}),o(h,{class:"mt-2 w-full",items:t(g).map(a=>a.name),label:t(l).vehicle_type,onSelectedItem:e[1]||(e[1]=a=>t(l).vehicle_type=a)},null,8,["items","label"])]),n("div",null,[o(u,{for:"registration_number"},{default:i(()=>e[11]||(e[11]=[r("Номер регистрации")])),_:1}),o(d,{class:"mt-2",id:"registration_number",modelValue:t(l).registration_number,"onUpdate:modelValue":e[2]||(e[2]=a=>t(l).registration_number=a),placeholder:"Введите номер регистрации"},null,8,["modelValue"])]),n("div",null,[o(u,{for:"volume"},{default:i(()=>e[12]||(e[12]=[r("Объем")])),_:1}),o(d,{class:"mt-2",id:"volume",type:"number",modelValue:t(l).volume,"onUpdate:modelValue":e[3]||(e[3]=a=>t(l).volume=a),placeholder:"Введите объем"},null,8,["modelValue"])]),n("div",null,[o(u,{for:"insurance_expiry"},{default:i(()=>e[13]||(e[13]=[r("Дата окончания страховки")])),_:1}),o(d,{class:"mt-2",id:"insurance_expiry",type:"date",modelValue:t(l).insurance_expiry,"onUpdate:modelValue":e[4]||(e[4]=a=>t(l).insurance_expiry=a)},null,8,["modelValue"])]),n("div",null,[o(u,{for:"mkad_pass_expiry"},{default:i(()=>e[14]||(e[14]=[r("Дата окончания пропуска МКАД")])),_:1}),o(d,{class:"mt-2",id:"mkad_pass_expiry",type:"date",modelValue:t(l).mkad_pass_expiry,"onUpdate:modelValue":e[5]||(e[5]=a=>t(l).mkad_pass_expiry=a)},null,8,["modelValue"])]),n("div",null,[o(u,{for:"status"},{default:i(()=>e[15]||(e[15]=[r("Статус")])),_:1}),o(d,{class:"mt-2",id:"status",modelValue:t(l).status,"onUpdate:modelValue":e[6]||(e[6]=a=>t(l).status=a),placeholder:"Введите статус"},null,8,["modelValue"])]),n("div",J,[o(x,{onClick:R(U,["stop"])},{default:i(()=>e[16]||(e[16]=[r("Удалить")])),_:1}),o(x,{onClick:C},{default:i(()=>e[17]||(e[17]=[r("Сохранить")])),_:1})]),t(y)?(p(),v("p",K,k(t(y)),1)):S("",!0)]))])}}});export{Z as default};
