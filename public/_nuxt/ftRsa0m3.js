import{_ as w,a as g}from"./xG5u76J_.js";import{_ as V}from"./DbRmwbl4.js";import{d as k,K as b,r as l,t as n,v as r,x as t,z as o,A as m,B as f,y as h,F as S,E as B,_ as N}from"./CE95Wurm.js";import{u as T}from"./C5GjP6W8.js";const U={class:"p-6"},C={key:0,class:"text-center"},I={key:1},E={key:0,class:"text-red-500 text-center"},$=k({__name:"login",setup(j){const v=b();T({title:"Авторизация"});const u=l(""),d=l(""),i=l(!1),a=l(""),x=async()=>{i.value=!0,a.value="";try{const s=await fetch("https://faunaplus24.ru/api/token/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:u.value,password:d.value})});if(!s.ok)throw new Error("Неверное имя пользователя или пароль");const e=await s.json();localStorage.setItem("accessToken",e.access),localStorage.setItem("refreshToken",e.refresh),v.push("/")}catch(s){a.value=s.message}finally{i.value=!1}};return(s,e)=>{const c=w,_=g,y=V;return n(),r("div",U,[e[6]||(e[6]=t("h1",{class:"text-2xl font-bold mb-4 text-center"},"Авторизация",-1)),i.value?(n(),r("div",C,e[2]||(e[2]=[t("p",null,"Загрузка...",-1)]))):(n(),r("div",I,[t("form",{onSubmit:B(x,["prevent"]),class:"flex flex-col gap-4"},[t("div",null,[o(c,{for:"username"},{default:m(()=>e[3]||(e[3]=[f("Имя пользователя")])),_:1}),o(_,{id:"username",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=p=>u.value=p),placeholder:"Введите имя пользователя"},null,8,["modelValue"])]),t("div",null,[o(c,{for:"password"},{default:m(()=>e[4]||(e[4]=[f("Пароль")])),_:1}),o(_,{id:"password",modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=p=>d.value=p),type:"password",placeholder:"Введите пароль"},null,8,["modelValue"])]),a.value?(n(),r("div",E,[t("p",null,h(a.value),1)])):S("",!0),o(y,{type:"submit",class:"w-full"},{default:m(()=>e[5]||(e[5]=[f("Войти")])),_:1})],32)]))])}}}),D=N($,[["__scopeId","data-v-b46a9d84"]]);export{D as default};
