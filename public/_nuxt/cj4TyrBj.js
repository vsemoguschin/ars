import{_ as z}from"./DbRmwbl4.js";import{_ as E,a as G,b as J,c as O,d as q,e as K,f as P,g as Q,h as W,i as X,j as Y,k as Z,l as h,m as ee}from"./Bk-8HdKD.js";import{_ as te,a as le}from"./xG5u76J_.js";import{_ as se}from"./CCxNnwLh.js";import{d as ne,a as oe,u as ae,r as m,o as ie,t as _,v as f,x as i,z as t,A as l,B as o,D as n,G as ue,y as c,H as re,I as de,J as me}from"./CE95Wurm.js";import{u as _e}from"./C5GjP6W8.js";const pe={class:"p-6"},fe={class:"flex gap-2 mb-4"},ve={class:"flex flex-col gap-3"},ce={class:"flex justify-between w-full"},ye={key:0,class:"text-center"},ge={key:1,class:"text-red-500 text-center"},xe={key:2},we=ne({__name:"index",setup(be){const{$useApi:y}=oe(),U=ae();_e({title:"Транспортные средства"});const g=m([]),V=m([]),k=m(!0),x=m(null),r=m(!1),a=m({vehicle_type:"",registration_number:"",volume:0,insurance_expiry:"",mkad_pass_expiry:"",status:""}),C=async()=>{try{const{data:u}=await y.get("/vehicles/");g.value=u;const{data:e}=await y.get("/vehicle-types/");V.value=e}catch(u){x.value=u.message}finally{k.value=!1}},T=async()=>{try{const{data:u}=await y.post("/vehicles/",a.value);g.value.push(u),r.value=!1,a.value={vehicle_type:"",registration_number:"",volume:0,insurance_expiry:"",mkad_pass_expiry:"",status:""}}catch(u){console.error("Ошибка создания транспортного средства:",u)}};return ie(C),(u,e)=>{const v=z,w=E,B=G,H=J,N=O,d=te,A=se,p=le,I=q,R=K,j=P,F=Q,b=W,D=X,L=Y,$=Z,M=h,S=ee;return _(),f("div",pe,[e[26]||(e[26]=i("h1",{class:"text-2xl font-bold mb-4"},"Список транспортных средств",-1)),i("div",fe,[t(v,{onClick:e[0]||(e[0]=s=>n(U).push("/")),class:"h-8 w-8"},{default:l(()=>e[10]||(e[10]=[o(" < ")])),_:1}),t(j,{open:n(r),"onUpdate:open":e[9]||(e[9]=s=>ue(r)?r.value=s:null)},{default:l(()=>[t(w,{"as-child":""},{default:l(()=>[t(v,{onClick:e[1]||(e[1]=s=>r.value=!0),class:"h-8 w-8"},{default:l(()=>e[11]||(e[11]=[o(" + ")])),_:1})]),_:1}),t(R,null,{default:l(()=>[t(N,null,{default:l(()=>[t(B,null,{default:l(()=>e[12]||(e[12]=[o("Создать транспортное средство")])),_:1}),t(H)]),_:1}),i("div",ve,[i("div",null,[t(d,{for:"vehicle_type"},{default:l(()=>e[13]||(e[13]=[o("Тип ТС")])),_:1}),t(A,{class:"mt-2",items:n(V).map(s=>s.name),label:"Тип ТС",onSelectedItem:e[2]||(e[2]=s=>n(a).vehicle_type=s)},null,8,["items"])]),i("div",null,[t(d,{for:"registration_number"},{default:l(()=>e[14]||(e[14]=[o("Номер регистрации")])),_:1}),t(p,{class:"mt-2",id:"registration_number",modelValue:n(a).registration_number,"onUpdate:modelValue":e[3]||(e[3]=s=>n(a).registration_number=s),placeholder:"Введите номер регистрации"},null,8,["modelValue"])]),i("div",null,[t(d,{for:"volume"},{default:l(()=>e[15]||(e[15]=[o("Объем")])),_:1}),t(p,{class:"mt-2",id:"volume",type:"number",modelValue:n(a).volume,"onUpdate:modelValue":e[4]||(e[4]=s=>n(a).volume=s),placeholder:"Введите объем"},null,8,["modelValue"])]),i("div",null,[t(d,{for:"insurance_expiry"},{default:l(()=>e[16]||(e[16]=[o("Дата окончания страховки")])),_:1}),t(p,{class:"mt-2",id:"insurance_expiry",type:"date",modelValue:n(a).insurance_expiry,"onUpdate:modelValue":e[5]||(e[5]=s=>n(a).insurance_expiry=s)},null,8,["modelValue"])]),i("div",null,[t(d,{for:"mkad_pass_expiry"},{default:l(()=>e[17]||(e[17]=[o("Дата окончания пропуска МКАД")])),_:1}),t(p,{class:"mt-2",id:"mkad_pass_expiry",type:"date",modelValue:n(a).mkad_pass_expiry,"onUpdate:modelValue":e[6]||(e[6]=s=>n(a).mkad_pass_expiry=s)},null,8,["modelValue"])]),i("div",null,[t(d,{for:"status"},{default:l(()=>e[18]||(e[18]=[o("Статус")])),_:1}),t(p,{class:"mt-2",id:"status",modelValue:n(a).status,"onUpdate:modelValue":e[7]||(e[7]=s=>n(a).status=s),placeholder:"Введите статус"},null,8,["modelValue"])])]),t(I,null,{default:l(()=>[i("div",ce,[t(v,{class:"mb-2",onClick:e[8]||(e[8]=s=>r.value=!1)},{default:l(()=>e[19]||(e[19]=[o("Отмена")])),_:1}),t(v,{onClick:T},{default:l(()=>e[20]||(e[20]=[o("Создать")])),_:1})])]),_:1})]),_:1})]),_:1},8,["open"])]),n(k)?(_(),f("div",ye,e[21]||(e[21]=[i("p",null,"Загрузка...",-1)]))):n(x)?(_(),f("div",ge,[i("p",null,"Ошибка загрузки: "+c(n(x)),1)])):(_(),f("div",xe,[t(S,null,{default:l(()=>[t(F,null,{default:l(()=>e[22]||(e[22]=[o("Список транспортных средств.")])),_:1}),t(L,{class:"bg-slate-100"},{default:l(()=>[t(D,null,{default:l(()=>[t(b,null,{default:l(()=>e[23]||(e[23]=[o("Номер регистрации")])),_:1}),t(b,null,{default:l(()=>e[24]||(e[24]=[o("Тип ТС")])),_:1}),t(b,null,{default:l(()=>e[25]||(e[25]=[o("Статус")])),_:1})]),_:1})]),_:1}),t(M,null,{default:l(()=>[(_(!0),f(re,null,de(n(g),s=>(_(),me(D,{key:s.id,onClick:$e=>n(U).push(`/vehicles/${s.id}`),class:"cursor-pointer hover:bg-gray-100"},{default:l(()=>[t($,null,{default:l(()=>[o(c(s.registration_number),1)]),_:2},1024),t($,null,{default:l(()=>[o(c(s.vehicle_type),1)]),_:2},1024),t($,null,{default:l(()=>[o(c(s.status),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]))])}}});export{we as default};
