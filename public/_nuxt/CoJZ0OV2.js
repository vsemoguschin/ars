import{_ as z}from"./DbRmwbl4.js";import{_ as E,a as G,b as J,c as O,d as q,e as K,f as P,g as Q,h as W,i as X,j as Y,k as Z,l as h,m as nn}from"./Bk-8HdKD.js";import{_ as tn,a as on}from"./xG5u76J_.js";import{_ as en}from"./CCxNnwLh.js";import{d as ln,a as sn,u as an,r as d,o as un,t as m,v as _,x as a,z as t,A as o,B as l,D as s,G as rn,y as f,H as dn,I as mn,J as _n}from"./CE95Wurm.js";import{u as fn}from"./C5GjP6W8.js";const pn={class:"p-6"},cn={class:"flex gap-2 mb-4"},vn={class:"flex flex-col gap-3"},gn={class:"flex justify-between w-full"},yn={key:0,class:"text-center"},$n={key:1,class:"text-red-500 text-center"},bn={key:2},Bn=ln({__name:"index",setup(Un){const{$useApi:y}=sn(),C=an();fn({title:"Контрагенты"});const $=d([]),b=d([]),k=d(!0),U=d(null),r=d(!1),i=d({name:"",phone:"",inn:"",contractor_type:""}),D=async()=>{try{const{data:u}=await y.get("/contractors/");$.value=u,console.log(u);const{data:n}=await y.get("/contractor-types/");console.log(n),b.value=n,console.log(b.value)}catch(u){U.value=u.message}finally{k.value=!1}},T=async()=>{try{const{data:u}=await y.post("/contractors/",i.value);$.value.push(u),r.value=!1,i.value={name:"",phone:"",inn:"",contractor_type:""}}catch(u){console.error("Ошибка создания контрагента:",u)}};return un(D),(u,n)=>{const p=z,w=E,B=G,H=J,N=O,c=tn,x=on,A=en,I=q,L=K,R=P,j=Q,v=W,V=X,F=Y,g=Z,M=h,S=nn;return m(),_("div",pn,[n[23]||(n[23]=a("h1",{class:"text-2xl font-bold mb-4"},"Список контрагентов",-1)),a("div",cn,[t(p,{onClick:n[0]||(n[0]=e=>s(C).push("/")),class:"h-8 w-8"},{default:o(()=>n[8]||(n[8]=[l(" < ")])),_:1}),t(R,{open:s(r),"onUpdate:open":n[7]||(n[7]=e=>rn(r)?r.value=e:null)},{default:o(()=>[t(w,{"as-child":""},{default:o(()=>[t(p,{onClick:n[1]||(n[1]=e=>r.value=!0),class:"h-8 w-8"},{default:o(()=>n[9]||(n[9]=[l(" + ")])),_:1})]),_:1}),t(L,null,{default:o(()=>[t(N,null,{default:o(()=>[t(B,null,{default:o(()=>n[10]||(n[10]=[l("Создать контрагента")])),_:1}),t(H)]),_:1}),a("div",vn,[a("div",null,[t(c,{for:"name"},{default:o(()=>n[11]||(n[11]=[l("Название")])),_:1}),t(x,{class:"mt-2",id:"name",modelValue:s(i).name,"onUpdate:modelValue":n[2]||(n[2]=e=>s(i).name=e),placeholder:"Введите название контрагента"},null,8,["modelValue"])]),a("div",null,[t(c,{for:"phone"},{default:o(()=>n[12]||(n[12]=[l("Телефон")])),_:1}),t(x,{class:"mt-2",id:"phone",modelValue:s(i).phone,"onUpdate:modelValue":n[3]||(n[3]=e=>s(i).phone=e),placeholder:"Введите номер телефона"},null,8,["modelValue"])]),a("div",null,[t(c,{for:"inn"},{default:o(()=>n[13]||(n[13]=[l("ИНН")])),_:1}),t(x,{class:"mt-2",type:"number",id:"inn",modelValue:s(i).inn,"onUpdate:modelValue":n[4]||(n[4]=e=>s(i).inn=e),placeholder:"Введите ИНН"},null,8,["modelValue"])]),a("div",null,[t(c,{for:"contractor_type"},{default:o(()=>n[14]||(n[14]=[l("Тип контрагента")])),_:1}),t(A,{class:"mt-2",items:s(b).map(e=>e.name),label:"Тип контрагента",onSelectedItem:n[5]||(n[5]=e=>s(i).contractor_type=e)},null,8,["items"])])]),t(I,null,{default:o(()=>[a("div",gn,[t(p,{class:"mb-2",onClick:n[6]||(n[6]=e=>r.value=!1)},{default:o(()=>n[15]||(n[15]=[l("Отмена")])),_:1}),t(p,{onClick:T},{default:o(()=>n[16]||(n[16]=[l("Создать")])),_:1})])]),_:1})]),_:1})]),_:1},8,["open"])]),s(k)?(m(),_("div",yn,n[17]||(n[17]=[a("p",null,"Загрузка...",-1)]))):s(U)?(m(),_("div",$n,[a("p",null,"Ошибка загрузки: "+f(s(U)),1)])):(m(),_("div",bn,[t(S,null,{default:o(()=>[t(j,null,{default:o(()=>n[18]||(n[18]=[l("Список контрагентов.")])),_:1}),t(F,{class:"bg-slate-100"},{default:o(()=>[t(V,null,{default:o(()=>[t(v,null,{default:o(()=>n[19]||(n[19]=[l("Название")])),_:1}),t(v,null,{default:o(()=>n[20]||(n[20]=[l("Телефон")])),_:1}),t(v,null,{default:o(()=>n[21]||(n[21]=[l("ИНН")])),_:1}),t(v,null,{default:o(()=>n[22]||(n[22]=[l("Тип")])),_:1})]),_:1})]),_:1}),t(M,null,{default:o(()=>[(m(!0),_(dn,null,mn(s($),e=>(m(),_n(V,{key:e.id,onClick:xn=>s(C).push(`/contractors/${e.id}`),class:"cursor-pointer hover:bg-gray-100"},{default:o(()=>[t(g,null,{default:o(()=>[l(f(e.name),1)]),_:2},1024),t(g,null,{default:o(()=>[l(f(e.phone),1)]),_:2},1024),t(g,null,{default:o(()=>[l(f(e.inn),1)]),_:2},1024),t(g,null,{default:o(()=>[l(f(e.contractor_type),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]))])}}});export{Bn as default};
